<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Trang chủ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
          integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"
          integrity="sha512-vKMx8UnXk60zUwyUnUPM3HbQo8QfmNx7+ltw8Pm5zLusl1XIfwcxo8DbWCqMGKaWeNxWA8yrx5v3SaVpMvR3CA=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" th:href="@{/web-assets/css/style.css}">
</head>
<body>
<header class="bg-dark">
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="/">
                <img src="https://motchilltv.io/logo_motchill.png" alt="" class="logo">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
                    aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-between" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link text-white" href="/">Trang chủ</a>
                    <a class="nav-link text-white" href="/phim-bo">Phim bộ</a>
                    <a class="nav-link text-white" href="/phim-le">Phim lẻ</a>
                    <a class="nav-link text-white" href="/phim-chieu-rap">Phim chiếu rạp</a>
                    <a class="nav-link text-white" href="#">Quốc gia</a>
                    <a class="nav-link text-white" href="#">Thể loại</a>
                </div>

                <div>
                    <a th:if="${session.CURRENT_USER == null}" class="text-white" href="/dang-nhap">Đăng nhập</a>

                    <div class="dropdown" th:if="${session.CURRENT_USER != null}">
                        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                                aria-expanded="false" th:text="${session.CURRENT_USER.name}">
                            Bui Hien
                        </button>
                        <ul class="dropdown-menu">
                            <li th:if="${session.CURRENT_USER.role.toString() == 'ADMIN'}">
                                <a class="dropdown-item" href="/admin">Trang quản trị</a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="/thong-tin-ca-nhan">Thông tin cá nhân</a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="/phim-yeu-thich">Phim yêu thích</a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="/lich-su-xem-phim">Lịch sử xem phim</a>
                            </li>
                            <li>
                                <span class="dropdown-item" style="cursor: pointer" onclick="logout()">Đăng xuất</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>

<section class="py-4">
    <div class="container">
        <h3>Phim HOT</h3>
        <div class="row">
            <div class="col-3">
                <a href="#" class="movie-item text-black text-decoration-none">
                    <div class="movie-poster rounded overflow-hidden">
                        <img src="https://image.motchilltv.vc/motchill/lo-lem-2-gio-sang-x350.webp" alt="">
                    </div>
                    <div class="movie-info">
                        <p class="mt-2">Tứ hải trọng minh</p>
                    </div>
                </a>
            </div>
            <div class="col-3">
                <a href="#" class="movie-item text-black text-decoration-none">
                    <div class="movie-poster rounded overflow-hidden">
                        <img src="https://image.motchilltv.vc/motchill/lo-lem-2-gio-sang-x350.webp" alt="">
                    </div>
                    <div class="movie-info">
                        <p class="mt-2">Tứ hải trọng minh</p>
                    </div>
                </a>
            </div>
            <div class="col-3">
                <a href="#" class="movie-item text-black text-decoration-none">
                    <div class="movie-poster rounded overflow-hidden">
                        <img src="https://image.motchilltv.vc/motchill/lo-lem-2-gio-sang-x350.webp" alt="">
                    </div>
                    <div class="movie-info">
                        <p class="mt-2">Tứ hải trọng minh</p>
                    </div>
                </a>
            </div>
            <div class="col-3">
                <a href="#" class="movie-item text-black text-decoration-none">
                    <div class="movie-poster rounded overflow-hidden">
                        <img src="https://image.motchilltv.vc/motchill/lo-lem-2-gio-sang-x350.webp" alt="">
                    </div>
                    <div class="movie-info">
                        <p class="mt-2">Tứ hải trọng minh</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>

<section class="py-4 bg-body-tertiary">
    <div class="container">
        <div class="mb-3 d-flex justify-content-between align-items-center">
            <h3 class="mb-0">Phim bộ mới cập nhật</h3>
            <a href="/phim-bo" class="text-decoration-none">Xem thêm</a>
        </div>

        <div class="row">
            <div class="col-2" th:each="movie : ${listPhimBo}">
                <a th:href="|/phim/${movie.id}/${movie.slug}|" class="movie-item text-black text-decoration-none">
                    <div class="movie-poster rounded overflow-hidden">
                        <img th:src="${movie.poster}" th:alt="${movie.name}">
                    </div>
                    <div class="movie-info">
                        <p class="mt-2" th:text="${movie.name}">Tứ hải trọng minh</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>

<section class="py-4 bg-body-tertiary">
    <div class="container">
        <div class="mb-3 d-flex justify-content-between align-items-center">
            <h3 class="mb-0">Phim lẻ mới cập nhật</h3>
            <a href="/phim-le" class="text-decoration-none">Xem thêm</a>
        </div>

        <div class="row">
            <div class="col-2" th:each="movie : ${listPhimLe}">
                <a th:href="|/phim/${movie.id}/${movie.slug}|" class="movie-item text-black text-decoration-none">
                    <div class="movie-poster rounded overflow-hidden">
                        <img th:src="${movie.poster}" th:alt="${movie.name}">
                    </div>
                    <div class="movie-info">
                        <p class="mt-2" th:text="${movie.name}">Tứ hải trọng minh</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>

<section class="py-4 bg-body-tertiary">
    <div class="container">
        <div class="mb-3 d-flex justify-content-between align-items-center">
            <h3 class="mb-0">Phim chiếu rạp mới cập nhật</h3>
            <a href="/phim-chieu-rap" class="text-decoration-none">Xem thêm</a>
        </div>

        <div class="row">
            <div class="col-2" th:each="movie : ${listPhimChieuRap}">
                <a th:href="|/phim/${movie.id}/${movie.slug}|" class="movie-item text-black text-decoration-none">
                    <div class="movie-poster rounded overflow-hidden">
                        <img th:src="${movie.poster}" th:alt="${movie.name}">
                    </div>
                    <div class="movie-info">
                        <p class="mt-2" th:text="${movie.name}">Tứ hải trọng minh</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>

<section class="py-4">
    <div class="container">
        <div class="mb-3 d-flex justify-content-between align-items-center">
            <h3 class="mb-0">Tin tức</h3>
            <a href="/tin-tuc" class="text-decoration-none">Xem thêm</a>
        </div>

        <div class="row">
            <div class="col-6 mb-4">
                <div class="bg-body-tertiary rounded">
                    <a href="#" class="d-block text-black text-decoration-none p-4">
                        <h5>Những bộ phim chủ đề Trò chơi đỉnh cao</h5>
                        <p>26/08/2024</p>
                        <p class="mb-0">Bạn đam mê những Game đầy gay cấn kịch tính, hôm nay Ví MoMo xin mang đến 10 bộ
                            phim đặc sắc về chủ đề Trò chơi.</p>
                    </a>
                </div>
            </div>
            <div class="col-6">
                <div class="bg-body-tertiary rounded">
                    <a href="#" class="d-block text-black text-decoration-none p-4">
                        <h5>Những bộ phim chủ đề Trò chơi đỉnh cao</h5>
                        <p>26/08/2024</p>
                        <p class="mb-0">Bạn đam mê những Game đầy gay cấn kịch tính, hôm nay Ví MoMo xin mang đến 10 bộ
                            phim đặc sắc về chủ đề Trò chơi.</p>
                    </a>
                </div>
            </div>
            <div class="col-6">
                <div class="bg-body-tertiary rounded">
                    <a href="#" class="d-block text-black text-decoration-none p-4">
                        <h5>Những bộ phim chủ đề Trò chơi đỉnh cao</h5>
                        <p>26/08/2024</p>
                        <p class="mb-0">Bạn đam mê những Game đầy gay cấn kịch tính, hôm nay Ví MoMo xin mang đến 10 bộ
                            phim đặc sắc về chủ đề Trò chơi.</p>
                    </a>
                </div>
            </div>
            <div class="col-6">
                <div class="bg-body-tertiary rounded">
                    <a href="#" class="d-block text-black text-decoration-none p-4">
                        <h5>Những bộ phim chủ đề Trò chơi đỉnh cao</h5>
                        <p>26/08/2024</p>
                        <p class="mb-0">Bạn đam mê những Game đầy gay cấn kịch tính, hôm nay Ví MoMo xin mang đến 10 bộ
                            phim đặc sắc về chủ đề Trò chơi.</p>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<footer class="py-4 bg-dark">
    <div class="container">
        <div class="row">
            <div class="col-4">
                <img src="https://motchilltv.io/logo_motchill.png" alt="" class="logo">
                <p class="text-white mt-3">Motchill - Xem phim Online Vietsub chất lượng cao miễn phí, nhiều thể loại
                    phim phong phú, đặc sắc, giao diện trực quan, thuận tiện, tốc độ tải nhanh, thường xuyên cập nhật
                    các bộ phim mới.</p>
            </div>
            <div class="col">
                <div class="text-white">
                    <h5 class="text-uppercase mb-3 fw-normal">Danh mục</h5>
                    <p>Tin tức</p>
                    <p>Phim chiếu rạp</p>
                    <p>Phim lẻ</p>
                    <p>Phim bộ</p>
                    <p>TV Show</p>
                </div>
            </div>
            <div class="col">
                <div class="text-white">
                    <h5 class="text-uppercase mb-3 fw-normal">Danh mục</h5>
                    <p>Tin tức</p>
                    <p>Phim chiếu rạp</p>
                    <p>Phim lẻ</p>
                    <p>Phim bộ</p>
                    <p>TV Show</p>
                </div>
            </div>
            <div class="col">
                <div class="text-white">
                    <h5 class="text-uppercase mb-3 fw-normal">Danh mục</h5>
                    <p>Tin tức</p>
                    <p>Phim chiếu rạp</p>
                    <p>Phim lẻ</p>
                    <p>Phim bộ</p>
                    <p>TV Show</p>
                </div>
            </div>
            <div class="col">
                <div class="text-white">
                    <h5 class="text-uppercase mb-3 fw-normal">Danh mục</h5>
                    <p>Tin tức</p>
                    <p>Phim chiếu rạp</p>
                    <p>Phim lẻ</p>
                    <p>Phim bộ</p>
                    <p>TV Show</p>
                </div>
            </div>
        </div>
    </div>
</footer>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"
        integrity="sha512-VEd+nq25CkR676O+pLBnDW09R7VQX9Mdiij052gVCp5yVH3jGtH70Ho/UUv4mJDsEdTvqRCFZg0NKGiojGnUCw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script th:src="@{/web-assets/js/main.js}"></script>
<script>
    function logout() {
        fetch('/api/auth/logout', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => {
                if (response.ok) {
                    toastr.success('Đăng xuất thành công.');
                    setTimeout(() => {
                        window.location.href = '/';
                    }, 1000);

                    console.log('Đăng xuất thành công.');
                } else {
                    toastr.error('Đăng xuất không thành công.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }
</script>
</body>
</html>